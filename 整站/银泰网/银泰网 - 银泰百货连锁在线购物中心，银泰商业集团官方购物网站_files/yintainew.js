window._BFD=window._BFD||{};_BFD.addEvent=function(e,d,f){if(e.addEventListener){e.addEventListener(d,f,false)}else{if(e.attachEvent){e.attachEvent("on"+d,function(){f.call(e)})}else{e["on"+d]=f}}};_BFD.removeEvent=function(e,d,f){if(e.removeEventListener){e.removeEventListener(d,f,false)}else{if(e.detachEvent){e.detachEvent("on"+d,function(){f.call(e)})}else{e["on"+d]=null}}};_BFD.createElement=function(g,f){var h=document.createElement(g);if(f){for(var e in f){if(f.hasOwnProperty(e)){if(e==="class"||e==="className"){h.className=f[e]}else{if(e==="style"){h.style.cssText=f[e]}else{h.setAttribute(e,f[e])}}}}}return h};_BFD.loadScript=function(d,c){setTimeout(function(){var a=_BFD.createElement("script",{src:d,type:"text/javascript"});if(a.readyState){_BFD.addEvent(a,"readystatechange",function(){if(a.readyState==="loaded"||a.readyState==="complete"){if(c){c()}_BFD.removeEvent(a,"readystatechange",arguments.callee)}})}else{_BFD.addEvent(a,"load",function(){if(c){c()}_BFD.removeEvent(a,"load",arguments.callee)})}document.getElementsByTagName("head")[0].appendChild(a)},0)};_BFD.getByAttribute=function(l,k,j){var i=[],j=(j)?j:document,n=j.getElementsByTagName("*"),o=new RegExp("\\b"+k+"\\b","i");for(var p=0;p<n.length;p++){var m=n[p];if(l==="className"||l==="class"){if(o.test(m.className)){i.push(m)}}else{if(m.getAttribute(l)===k){i.push(m)}}}return i};_BFD.getByClass=function(c,d){return _BFD.getByAttribute("className",c,d)};_BFD.getById=function(b){if(typeof b==="string"&&!!b){return document.getElementById(b)}};_BFD.loadCss=function(d){var c=_BFD.createElement("link",{href:d,rel:"stylesheet",type:"text/css"});document.getElementsByTagName("head")[0].appendChild(c)};_BFD.insertAfter=function(g,h){var e=h.parentNode;if(e.lastChild==h){e.appendChild(g)}else{var f=h.nextElementSibling||h.nextSibling;e.insertBefore(g,f)}};_BFD.Banner=function(b,d,a){this.callback=d;this.args=a;this.positionstr=b.pos_dom;this.bid=b.bid;if(b.json_args){this.json_str=c(b.json_args)}else{this.json_str="{}"}function c(f){var g=[];for(var e in f){g.push('"'+e+'":"'+f[e]+'"')}return"{"+g.join(",")+"}"}};_BFD.handleResults=function(e,g){if(g&&g[2]&&g[2].length>0){var f=g[2];for(var b=0;b<f.length;b++){var h=e[b];var c=f[b][3];var a=f[b][2];var j=h.bid;var d=h.args;if(c&&c.length>0){h.callback(c,a,j,d)}}}};_BFD.parseBanners=function(b,f,g){var e=[],a=[];for(var c=0,d;d=f[c++];){e.push(d.bid);if(d.json_str&&d.json_str.length>0&&d.json_str!="{}"){a.push("rec_"+d.bid+"$"+d.json_str)}else{a.push("rec_"+d.bid)}}if(f.length){b.bidlst=e.join("|");b.req=a.join("|");g.send(b,function(h){_BFD.handleResults(f,h)})}};_BFD.invoketime=0;_BFD.loadScript(("https:"==document.location.protocol?"https://ssl-static":"http://static")+".baifendian.com/api/2.0/bcore.min.js",function(){var a=(function(){function b(){var f=new $Core(function(){});_BFD.bfd_show=function(k,i,h,j){var g=_BFD.show_recommended(j,h);_BFD.show_template(k,g,i,h,j)};_BFD.show_recommended=function(h,g){};_BFD.show_content=function(i,g,h){};_BFD.show_template=function(g,k,i,h,j){};_BFD.banners={dt:[],ls:[],sc:[],odr:[],hp:[],sr_n:[],sr_y:[],ap:[],bls:[],chl:[],pm:[],cp:[],dft:[],wrg:[],"default":[]};if(!_BFD.BFD_INFO||_BFD.BFD_INFO.page_type==""){_BFD.BFD_INFO={user_id:"",page_type:"dft"}}this.Tools=$Core.tools.Tools;var c=_BFD.BFD_INFO.user_id;var e=_BFD.client_id;f.options.cid=e;f.options.uid=c;f.options.d_s="pc";if(typeof(f.options.uid)=="undefined"||f.options.uid==""||f.options.uid=="0"||f.options.uid==null){f.options.uid=f.options.sid}this.info=_BFD.BFD_INFO;var d=this[this.info.page_type];if(d&&typeof d==="function"){d.call(this,f)}}if(document.getElementsByTagName("title")[0].innerHTML=="银泰网 - 银泰百货连锁在线购物中心，银泰商业集团官方购物网站"){_BFD.BFD_INFO={user_id:"",page_type:"homepage"}}b.prototype={detail:function(s){s.options.p_t="dt";var v=_BFD.BFD_INFO.id;var C=_BFD.BFD_INFO.name;var n=_BFD.BFD_INFO.link;var f=_BFD.BFD_INFO.image_link;var t=_BFD.BFD_INFO.simage_link;var z=_BFD.BFD_INFO.price;var k=_BFD.BFD_INFO.market_price;var x=_BFD.BFD_INFO.category;var r=_BFD.BFD_INFO.brand;var w=_BFD.BFD_INFO.onsale;var e=_BFD.BFD_INFO.stock;var g=_BFD.BFD_INFO.discount;var p=_BFD.BFD_INFO.group;var d=_BFD.BFD_INFO.category_id;var j=_BFD.BFD_INFO.brand_id;var y=_BFD.BFD_INFO.color;s.send(new BCore.inputs.Visit(v));var m=[];if(x&&x instanceof Array){for(var A=0;A<x.length;A++){m.push(x[A][0])}}if(w=="false"||!w||e==0||C==""||n==""||f==""){s.send(new $Core.inputs.RmItem(v))}else{var o=new $Core.inputs.AddItem(v);o.name=C;o.url=n;o.img=f;o.simg=t;o.prc=z;o.mktp=k;o.grp=p;o.cat=m;o.cat_id=d;o.brd=r;o.dis=g;o.brd_id=j;o.clr=y;o.stk=e;s.send(o)}if(m.length>0){var l=m[m.length-1];s.send(new $Core.inputs.VisitCat(m.join("$")));var q=new $Core.inputs.AddCat(l);if(x.length>0){q.url=x[x.length-1][1];var u=x.concat();u.pop();q.ptree=new $Core.inputs.JObject().toString(u);s.send(q)}}var h=new $Core.inputs.PageView();h.p_s=C;if(_BFD.banners["dt"]&&_BFD.banners["dt"].length>0){h.p_p="rec";var c=new BCore.recommends.Recommend("P");c.unq=1;c.iid=v;c.cat_cur=m.join("$");c.cat=m.join("$");var B=m.concat();B.pop();c.cat2=B.join("$");c.brd=r;_BFD.parseBanners(c,_BFD.banners["dt"],s)}s.send(h)},list:function(m){m.options.p_t="ls";var d=_BFD.BFD_INFO.category;var j=[];if(d&&d.length>0){for(var k=0;k<d.length;k++){j.push(d[k][0])}var f=d[d.length-1][0];m.send(new $Core.inputs.VisitCat(j.join("$")));var e=new $Core.inputs.AddCat(f);e.url=d[d.length-1][1];var g=d.concat();g.pop();e.ptree=new $Core.inputs.JObject().toString(g);m.send(e)}var h=new $Core.inputs.PageView();if(_BFD.banners["ls"]&&_BFD.banners["ls"].length>0){h.p_p="rec";var c=new BCore.recommends.Recommend("P");c.unq=1;c.cat_cur=j.join("$");c.cat=j.join("$");var l=j.concat();l.pop();c.cat2=l.join("$");_BFD.parseBanners(c,_BFD.banners["ls"],m)}m.send(h)},shopcart:function(m){m.options.p_t="sc";var c=[];var j=this.Tools.mergeRepeat(_BFD.BFD_INFO.cart_items);if(j.length>0){var k=new $Core.inputs.AddCart();for(var f=0;f<j.length;f++){var l=j[f][0]+"";c.push(l);var h=this.Tools.toNumber(j[f][1]);var g=this.Tools.toNumber(j[f][2]);k.push({i:l,p:h,n:g})}m.send(k)}var e=new $Core.inputs.PageView();if(_BFD.banners["sc"]&&_BFD.banners["sc"].length>0){e.p_p="rec";var d=new BCore.recommends.Recommend("P");d.unq=1;d.iid=c;_BFD.parseBanners(d,_BFD.banners["sc"],m)}m.send(e)},order:function(p){p.options.p_t="odr";var n=_BFD.BFD_INFO.order_id;var m=_BFD.BFD_INFO.total;var k=_BFD.BFD_INFO.payment;var l=_BFD.BFD_INFO.express;var d=new $Core.inputs.Order(n);d.total=this.Tools.toNumber(m);var f=this.Tools.mergeRepeat(_BFD.BFD_INFO.order_items);for(var g=0;g<f.length;g++){if(Number(f[g][2])>0){var o=f[g][0]+"";var j=this.Tools.toNumber(f[g][1]);var h=this.Tools.toNumber(f[g][2]);d.push({i:o,p:j,n:h})}}p.send(d);var e=new $Core.inputs.PageView();if(_BFD.banners["odr"]&&_BFD.banners["odr"].length>0){e.p_p="rec";var c=new BCore.recommends.Recommend("P");c.unq=1;_BFD.parseBanners(c,_BFD.banners["odr"],p)}p.send(e)},homepage:function(e){e.options.p_t="hp";var c=new $Core.inputs.PageView();if(_BFD.banners["hp"]&&_BFD.banners["hp"].length>0){c.p_p="rec";var d=new BCore.recommends.Recommend("P");d.unq=1;_BFD.parseBanners(d,_BFD.banners["hp"],e)}e.send(c)},search:function(h){h.options.p_t="sr";var g=_BFD.BFD_INFO.search_word;var f=_BFD.BFD_INFO.search_result;var c=new $Core.inputs.PageView();var e=new $Core.inputs.Search(g);if(f=="0"){e.emp=1;if(_BFD.banners["sr_n"]&&_BFD.banners["sr_n"].length>0){c.p_p="rec";var d=new BCore.recommends.Recommend("P");d.unq=1;_BFD.parseBanners(d,_BFD.banners["sr_n"],h)}}else{e.emp=0;if(_BFD.banners["sr_y"]&&_BFD.banners["sr_y"].length>0){c.p_p="rec";var d=new BCore.recommends.Recommend("P");d.unq=1;_BFD.parseBanners(d,_BFD.banners["sr_y"],h)}}h.send(e);h.send(c)},account:function(f){f.options.p_t="ap";var c=new $Core.inputs.PageView();if(_BFD.banners["ap"]&&_BFD.banners["ap"].length>0){c.p_p="rec";var e=new BCore.recommends.Recommend("P");e.unq=1;var d=self.location.href;if(d.indexOf("*")!=-1){c.p_p="rec";_BFD.parseBanners(e,_BFD.banners["ap"],f)}}f.send(c)},brandlist:function(f){f.options.p_t="bls";var e=_BFD.BFD_INFO.brand;var c=new $Core.inputs.PageView();if(_BFD.banners["bls"]&&_BFD.banners["bls"].length>0){c.p_p="rec";var d=new BCore.recommends.Recommend("P");d.unq=1;_BFD.parseBanners(d,_BFD.banners["bls"],f)}f.send(c)},channel:function(f){f.options.p_t="chl";var d=_BFD.BFD_INFO.channel_name;var c=new $Core.inputs.PageView();if(_BFD.banners["chl"]&&_BFD.banners["chl"].length>0){c.p_p="rec";var e=new BCore.recommends.Recommend("P");e.unq=1;_BFD.parseBanners(e,_BFD.banners["chl"],f)}f.send(c)},payment:function(p){p.options.p_t="pm";var n=_BFD.BFD_INFO.order_id;var m=_BFD.BFD_INFO.total;var k=_BFD.BFD_INFO.payment;var l=_BFD.BFD_INFO.express;var d=new $Core.inputs.Pay(n);d.total=this.Tools.toNumber(m);var f=this.Tools.mergeRepeat(_BFD.BFD_INFO.order_items);for(var g=0;g<f.length;g++){if(Number(f[g][2])>0){var o=f[g][0]+"";var j=this.Tools.toNumber(f[g][1]);var h=this.Tools.toNumber(f[g][2]);d.push({i:o,p:j,n:h})}}p.send(d);var e=new $Core.inputs.PageView();if(_BFD.banners["pm"]&&_BFD.banners["pm"].length>0){e.p_p="rec";var c=new BCore.recommends.Recommend("P");c.unq=1;_BFD.parseBanners(c,_BFD.banners["pm"],p)}p.send(e)},campaign:function(e){e.options.p_t="cp";var c=new $Core.inputs.PageView();if(_BFD.banners["cp"]&&_BFD.banners["cp"].length>0){c.p_p="rec";var d=new BCore.recommends.Recommend("P");d.unq=1;_BFD.parseBanners(d,_BFD.banners["cp"],e)}e.send(c)},others:function(e){e.options.p_t="dft";var c=new $Core.inputs.PageView();if(_BFD.banners["dft"]&&_BFD.banners["dft"].length>0){c.p_p="rec";var d=new BCore.recommends.Recommend("P");d.unq=1;_BFD.parseBanners(d,_BFD.banners["dft"],e)}e.send(c)},wrong:function(f){f.options.p_t="dft";var e=_BFD.BFD_INFO.id;f.send(new $Core.inputs.RmItem(e));var c=new $Core.inputs.PageView();if(_BFD.banners["wrg"]&&_BFD.banners["wrg"].length>0){c.p_p="rec";var d=new BCore.recommends.Recommend("P");d.unq=1;_BFD.parseBanners(d,_BFD.banners["wrg"],f)}f.send(c)},dft:function(d){d.options.p_t="dft";d.options.uid=d.options.sid;var c=new $Core.inputs.PageView();c.p_p="";d.send(c)}};return b})();new a()});